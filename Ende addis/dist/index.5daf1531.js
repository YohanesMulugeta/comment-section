const e={currentUser:{image:{png:"./images/avatars/image-juliusomo.png",webp:"./images/avatars/image-juliusomo.webp"},username:"juliusomo"},comments:[{id:1,content:"Impressive! Though it seems the drag feature could be improved. But overall it looks incredible. You've nailed the design and the responsiveness at various breakpoints works really well.",createdAt:"1 month ago",score:12,user:{image:{png:"./images/avatars/image-amyrobson.png",webp:"./images/avatars/image-amyrobson.webp"},username:"amyrobson"},replies:[]},{id:2,content:"Woah, your project looks awesome! How long have you been coding for? I'm still new, but think I want to dive into React as well soon. Perhaps you can give me an insight on where I can learn React? Thanks!",createdAt:"2 weeks ago",score:5,user:{image:{png:"./images/avatars/image-maxblagun.png",webp:"./images/avatars/image-maxblagun.webp"},username:"maxblagun"},replies:[{id:"2-1",content:"If you're still new, I'd recommend focusing on the fundamentals of HTML, CSS, and JS before considering React. It's very tempting to jump ahead but lay a solid foundation first.",createdAt:"1 week ago",score:7,replyingTo:"maxblagun",user:{image:{png:"./images/avatars/image-ramsesmiron.png",webp:"./images/avatars/image-ramsesmiron.webp"},username:"ramsesmiron"}},{id:"2-2",content:"I couldn't agree more with this. Everything moves so fast and it always seems like everyone knows the newest library/framework. But the fundamentals are what stay constant.",createdAt:"2 days ago",score:2,replyingTo:"ramsesmiron",user:{image:{png:"./images/avatars/image-juliusomo.png",webp:"./images/avatars/image-juliusomo.webp"},username:"juliusomo"}}]}]},t=function(){localStorage.setItem("state",JSON.stringify(e))},n=function(e,t){return e.findIndex((e=>e.id===t))},s=function(t){const s=parseInt(t),a=n(e.comments,+s);if(!+t){const s=n(e.comments[a].replies,t);return e.comments[a].replies[s]}return e.comments[a]},a=function(s,a){if(+a)return e.comments.push(s),t(),e.comments[-1];const o=parseInt(a),i=n(e.comments,o);return e.comments[i].replies.push(s),t(),e.comments[i].replies[-1]};!function(){const t=JSON.parse(localStorage.getItem("state"));t&&(e.comments=t.comments,e.currentUser=t.currentUser)}();class o{_data;_parentElement;render(e,t,n=!1,s){this._data=e;const a=this._generateMarkup(n,s);if(t&&this.parentSet(t),this._parentElement.insertAdjacentHTML("beforeend",a),s){const e=document.getElementById(this._data.id),t=e.querySelector(".delete-edit-container");setTimeout((()=>{t.remove(),e.querySelector(".comment-btn-container").insertAdjacentHTML("beforeend",this.reply)}),3e5)}this._data.replies&&this._data.replies.length>=1&&(this.repliedContainerSetter(this._data.id+"RC"),this._data.replies.forEach((e=>{this.render(e,parseInt(this._data.id)+"RC",!0)})))}parentSet(e){this._parentElement=document.getElementById(e)}}var i=new class extends o{deleteEdit='\n        <div class="delete-edit-container flex">\n          <div class="delete-container flex">\n            <svg width="12" height="14" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M1.167 12.448c0 .854.7 1.552 1.555 1.552h6.222c.856 0 1.556-.698 1.556-1.552V3.5H1.167v8.948Zm10.5-11.281H8.75L7.773 0h-3.88l-.976 1.167H0v1.166h11.667V1.167Z"\n                fill="#ED6368"\n              />\n            </svg>\n\n            <label for="#delete" class="delete">Delete</label>\n          </div>\n\n          <div class="edit-container flex">\n            <svg width="14" height="14" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M13.479 2.872 11.08.474a1.75 1.75 0 0 0-2.327-.06L.879 8.287a1.75 1.75 0 0 0-.5 1.06l-.375 3.648a.875.875 0 0 0 .875.954h.078l3.65-.333c.399-.04.773-.216 1.058-.499l7.875-7.875a1.68 1.68 0 0 0-.061-2.371Zm-2.975 2.923L8.159 3.449 9.865 1.7l2.389 2.39-1.75 1.706Z"\n                fill="#5357B6"\n              />\n            </svg>\n\n            <label for="#edit" class="edit">Edit</label>\n          </div>\n        </div>\n  ';reply='\n      <div class="reply-container flex">\n        <svg width="14" height="13" xmlns="http://www.w3.org/2000/svg">\n          <path\n            d="M.227 4.316 5.04.16a.657.657 0 0 1 1.085.497v2.189c4.392.05 7.875.93 7.875 5.093 0 1.68-1.082 3.344-2.279 4.214-.373.272-.905-.07-.767-.51 1.24-3.964-.588-5.017-4.829-5.078v2.404c0 .566-.664.86-1.085.496L.227 5.31a.657.657 0 0 1 0-.993Z"\n            fill="#5357B6"\n          />\n        </svg>\n\n        <label for="#reply" class="reply">Reply</label>\n    </div>\n    \n  ';repliedContainer;_generateMarkup(e,t){return this._parentElement=e?document.querySelector(".replied-container"):document.querySelector(".comment-card-container"),`\n     <div class="comment-card grid grid--2-cols" id = "${this._data.id}" data-id = "${this._data.id}">\n      <div class="avatar-container flex">\n        <img\n          class="img-avatar"\n          src="${this._data.user.image.webp}"\n          alt="photo of ${this._data.user.username}"\n        />\n        <p class="user-name">${this._data.user.username}</p>\n        <p class="comment-time">${this._data.createdAt}</p>\n      </div>\n\n      <div class="comment-container">\n        <p class="comment">\n\n          ${e?"<span class='replying-to'>@"+this._data.replyingTo+"</span> "+this._data.content:this._data.content}\n        </p>\n      </div>\n\n      \x3c!-- //////////////////////////////////////////////////////////         comment SCORE --\x3e\n\n      <div class="score-container flex">\n        <button class="btn btn-score plus flex">\n          <svg width="11" height="11" xmlns="http://www.w3.org/2000/svg">\n            <path\n              d="M6.33 10.896c.137 0 .255-.05.354-.149.1-.1.149-.217.149-.354V7.004h3.315c.136 0 .254-.05.354-.149.099-.1.148-.217.148-.354V5.272a.483.483 0 0 0-.148-.354.483.483 0 0 0-.354-.149H6.833V1.4a.483.483 0 0 0-.149-.354.483.483 0 0 0-.354-.149H4.915a.483.483 0 0 0-.354.149c-.1.1-.149.217-.149.354v3.37H1.08a.483.483 0 0 0-.354.15c-.1.099-.149.217-.149.353v1.23c0 .136.05.254.149.353.1.1.217.149.354.149h3.333v3.39c0 .136.05.254.15.353.098.1.216.149.353.149H6.33Z"\n              fill="hsl(211, 10%, 45%)"\n            />\n          </svg>\n        </button>\n\n        <p class="score">${this._data.score}</p>\n\n        <button class="btn btn-score minus flex">\n          <svg width="11" height="3" xmlns="http://www.w3.org/2000/svg">\n            <path\n              d="M9.256 2.66c.204 0 .38-.056.53-.167.148-.11.222-.243.222-.396V.722c0-.152-.074-.284-.223-.395a.859.859 0 0 0-.53-.167H.76a.859.859 0 0 0-.53.167C.083.437.009.57.009.722v1.375c0 .153.074.285.223.396a.859.859 0 0 0 .53.167h8.495Z"\n              fill="hsl(211, 10%, 45%)"\n            />\n          </svg>\n        </button>\n      </div>\n\n      \x3c!-- //////////////////////////////////////////////////////               REPLY PART --\x3e\n      \x3c!-- ////////////////////////////////////////////////////// --\x3e\n      <div class ="comment-btn-container">\n         ${t?this.deleteEdit:this.reply}\n      </div>\n    </div>\n    `}repliedContainerSetter(e){const t=document.createElement("div");t.classList.add("replied-container"),t.classList.add("flex"),t.id=t.dataset.id=e,document.getElementById(parseInt(e)).after(t),this.parentSet(e)}init(e){e.forEach((e=>{this.render(e)}))}};const r=new class extends o{_parentElement=document.querySelector(".comment-section ");_btnSend;render(e,t,n,s=!0){const[a,o]=t?t.split("to"):[null,null],i=document.querySelector(".section-comment-send");if(a&&!s){const e=document.createElement("div");e.classList.add("replied-container"),e.classList.add("flex"),e.id=e.dataset.id=a,document.getElementById(parseInt(a)).after(e),this.parentSet(a)}if(a&&s&&(this.parentSet(a),this._parentElement.lastElementChild.scrollIntoView({behavior:"smooth"})),this._data=e,i?.parentElement.classList.contains("replied-container")&&!i.parentElement.querySelector(".comment-card")){const e=i.parentElement;i.remove(),e.remove()}i?.remove();const r=this._generateMarkup();t||(this._parentElement=document.querySelector(".comment-section ")),this._parentElement.insertAdjacentHTML("beforeend",r),this.events(n,o)}_generateMarkup(){return`\n    <section class="section-comment-send grid grid--2-cols">\n        <form action="submit" class="comment-form">\n            <textarea\n            name="comment-field"\n            class="comment-field"\n            id=""\n            cols="30"\n            rows="10"\n            placeholder="Add a comment..."\n            ></textarea>\n        </form>\n\n        <img\n            class="avatar-typing"\n            src="${this._data.image.png}"\n            alt="photo of ${this._data.username}"\n        />\n        <button class="btn btn-send">Send</button>\n    </section>\n    `}events(e,t){this._textarea=document.querySelector(".comment-field"),this._btnSend=document.querySelector(".btn-send");const n=()=>{this._textarea.value&&(e(this._textarea.value,t),this._textarea.value=null)};this._btnSend.removeEventListener("click",n),this._btnSend.addEventListener("click",n)}},c=function(e){!function(e){window.addEventListener("click",(t=>{const n=t.target;if(!n.closest(".btn-score"))return;n.closest(".score-container").textContent.trim();const s=n.closest(".comment-card").id,a=e(s,!!n.closest(".plus"));document.getElementById(s).querySelector(".score").textContent=a}))}(e)};const d=new class extends o{toBeEditedId;toBeEditedcomment;btnUpdate;updateField;_updateSection='\n            <section class="comment-update flex">\n                <form action="submit" class="comment-form">\n                    <textarea\n                    name="comment-field"\n                    class="update-field"\n                    id="wetpussy"\n                    id=""\n                    cols="30"\n                    rows="10"\n                    ></textarea>\n                </form>\n\n                <button class="btn btn-update">Update</button>\n            </section>\n';render(e=!1){this.parentSet(this.toBeEditedId),e||(this.toBeEditedcomment.textContent="",document.querySelector(".section-comment-send").remove(),this._parentElement.querySelector(".comment-container").insertAdjacentHTML("beforeend",this._updateSection),this.updateField=document.getElementById("wetpussy"),this.updateField.value=this._data.content),e&&(this.updateField.closest(".comment-update").remove(),this.toBeEditedcomment.insertAdjacentHTML("beforeend",this._generateMarkup()),this._parentElement.querySelector(".delete-edit-container").classList.remove("hidden"))}_generateMarkup(){return`\n    ${this._data.replyingTo?"<span class='replying-to'>@"+this._data.replyingTo+"</span> "+this._data.content:this._data.content}\n    `}events(e){const t=t=>{this._data.content=e(this.toBeEditedId,this.updateField.value),this.render(!0)},n=n=>{const s=n.target;s.closest(".edit-container")&&(this.updateField&&(this.updateField.closest(".comment-update").remove(),this.toBeEditedcomment.textContent=this._data.replyingTo?"<span class='replying-to'>@"+this._data.replyingTo+"</span> "+this._data.content:this._data.content),this.toBeEditedId=s.closest(".comment-card").dataset.id,this.toBeEditedcomment=document.getElementById(this.toBeEditedId).querySelector(".comment"),s.closest(".delete-edit-container").classList.add("hidden"),this._data=e(this.toBeEditedId),this.render(),this.btnUpdate?.removeEventListener("click",t),this.btnUpdate=document.querySelector(".btn-update"),this.btnUpdate.addEventListener("click",t))};window.removeEventListener("click",n),window.addEventListener("click",n)}init(e){this.events(e)}},l=document.body;let m;const u=function(e){const t=t=>{(t=>{t.target.classList.contains("btn-yes")&&(e(m),document.getElementById(m).remove(),document.querySelector(".delete-popup").remove()),(t.target.classList.contains("btn-cancel")||t.target.classList.contains("overlay"))&&(console.log("click"),document.querySelector(".delete-popup").remove())})(t)};window.addEventListener("click",(function(e){e.target.closest(".delete-container")&&(m=e.target.closest(".comment-card").dataset.id,l.insertAdjacentHTML("beforeend",'\n        <div class="delete-popup">\n            <div class="overlay"></div>\n            <div class="popup-card flex">\n            <p class="popup-header">Delete comment</p>\n            <p>\n                Are you sure you want to delete this comment? This will remove the comment\n                and it can\'t be undone.\n            </p>\n            <footer class="popup-footer flex">\n                <button class="btn-cancel btn">no, cancel</button>\n                <button class="btn-yes btn">yes, delete</button>\n            </footer>\n            </div>\n        </div>\n'),l.removeEventListener("click",t),l.addEventListener("click",t))}))},p=function({comment:e,RCid:t,replied:n=!1,current:s}){const a=s||n;i.render(e,t,n,a)},h=function(t,n,o){const i={content:t,createdAt:(new Date).getDay(),score:0,user:e.currentUser};if(n){const e=parseInt(n),t=s(e);if(!+n){const e=s(n).user.username;i.replyingTo=e}if(+n){const e=t.user.username;i.replyingTo=e}const o=(new Date).getTime();i.id=e+"-"+o,a(i,i.id);p({RCid:e+"RC",replied:!0,comment:i})}else i.id=(new Date).getTime(),i.replies=[],a(i,i.id),p({comment:i,current:!0});r.render(e.currentUser,null,h)},g=function(n,s){const a=function(n,s=!0){const a=e.comments.findIndex((e=>e.id===parseInt(n)));if(+n)return s?e.comments[a].score++:e.comments[a].score--,t(),e.comments[a].score;const o=e.comments[a].replies.findIndex((e=>e.id===n));return s?e.comments[a].replies[o].score++:e.comments[a].replies[o].score--,t(),e.comments[a].replies[o].score}(n,s);return a},v=function(t,n){const a=parseInt(n)+"RCto"+n;if(!t){const t=s(n).replies.length>0;return r.render(e.currentUser,a,h,t),t}r.render(e.currentUser,a,h)},f=function(a,o){const i=s(a);return o?(r.render(e.currentUser,null,h),function(s,a){const o=parseInt(s),i=n(e.comments,+o);if(!+s){const o=n(e.comments[i].replies,s);return e.comments[i].replies[o].content=a,t(),e.comments[i].replies[o].content}return e.comments[i].content=a,t(),e.comments[i].content}(a,o)):+a?{content:i.content}:{content:i.content,replyingTo:i.replyingTo}},b=function(s){!function(s){if(+s&&(e.comments.splice(n(e.comments,s)),t()),!+s){const a=parseInt(s),o=n(e.comments,a),i=n(e.comments[o].replies,s);console.log(e.comments[o].replies.splice(i)),t()}}(s)};var y;i.init(e.comments),r.render(e.currentUser,null,h),c(g),y=v,window.addEventListener("click",(e=>{if(!e.target.closest(".reply-container"))return;const t=e.target,n=t.closest(".comment-card").dataset.id;t.closest(".replied-container")?y(!0,n):y(!1,n)})),d.init(f),u(b);
//# sourceMappingURL=index.5daf1531.js.map
